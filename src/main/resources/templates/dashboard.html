<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Dashboard - Trading Experiment</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f7fa; min-height: 100vh; }
        .navbar { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .navbar-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .navbar h1 { font-size: 22px; }
        .navbar-links { display: flex; gap: 15px; align-items: center; }
        .navbar a { color: white; text-decoration: none; padding: 8px 16px; border-radius: 5px; }
        .navbar a:hover { background: rgba(255,255,255,0.2); }
        
        .container { max-width: 1400px; margin: 30px auto; padding: 0 20px; display: flex; align-items: center; justify-content: center; min-height: calc(100vh - 200px); }
        
        .welcome-card { background: white; padding: 60px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); text-align: center; max-width: 700px; }
        .welcome-card h2 { color: #333; font-size: 32px; margin-bottom: 15px; }
        .welcome-card .subtitle { color: #666; font-size: 18px; margin-bottom: 40px; line-height: 1.6; }
        
        .experiment-icon { font-size: 80px; margin-bottom: 30px; }
        
        .info-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 40px 0; }
        .info-item { padding: 20px; background: #f5f7fa; border-radius: 10px; }
        .info-item .icon { font-size: 32px; margin-bottom: 10px; }
        .info-item .label { color: #666; font-size: 13px; margin-bottom: 5px; }
        .info-item .value { font-size: 24px; font-weight: bold; color: #333; }
        
        .start-btn { display: inline-block; padding: 20px 60px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; text-decoration: none; border-radius: 10px; font-size: 20px; font-weight: bold; margin-top: 20px; transition: all 0.3s; box-shadow: 0 4px 15px rgba(102,126,234,0.4); }
        .start-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(102,126,234,0.6); }
        
        .completed-card { background: #d4edda; border: 2px solid #c3e6cb; padding: 30px; border-radius: 10px; margin-top: 30px; }
        .completed-card h3 { color: #155724; margin-bottom: 10px; }
        .completed-card p { color: #155724; }
        .view-results-btn { display: inline-block; padding: 12px 30px; background: #28a745; color: white; text-decoration: none; border-radius: 8px; margin-top: 15px; font-weight: bold; }
        .view-results-btn:hover { background: #218838; }
        
        .instructions { background: #fff3cd; border: 2px solid #ffc107; padding: 25px; border-radius: 10px; margin-top: 30px; text-align: left; }
        .instructions h4 { color: #856404; margin-bottom: 15px; }
        .instructions ul { margin-left: 20px; color: #856404; line-height: 1.8; }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="navbar-content">
            <h1>üìä Trading Experiment Platform</h1>
            <div class="navbar-links">
                <span sec:authentication="name"></span>
                <span th:if="${user.role == 'ADMIN'}">
                    <a href="/admin/dashboard" style="background: rgba(220,38,38,0.3);">üë®‚Äçüíº Admin Panel</a>
                </span>
                <a href="/logout" style="background: rgba(255,255,255,0.2);">Logout</a>
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- Experiment Completed State -->
        <div class="welcome-card" th:if="${experimentCompleted}">
            <div class="experiment-icon">‚úÖ</div>
            <h2>Experiment Complete!</h2>
            <p class="subtitle">Thank you for participating in the trading experiment</p>
            
            <div class="completed-card">
                <h3>üéâ All Done!</h3>
                <p>You have successfully completed all 100 trading decisions across 10 stocks.</p>
                <p>Your results have been saved and are now available for review.</p>
                <a href="/experiment/summary" class="view-results-btn">View My Results</a>
            </div>
        </div>
        
        <!-- Start Experiment State -->
        <div class="welcome-card" th:if="${canStartExperiment}">
            <div class="experiment-icon">üìà</div>
            <h2>Welcome, <span th:text="${user.fullName}"></span>!</h2>
            <p class="subtitle">You're about to begin the Stock Trading Experiment</p>
            
            <div class="info-grid">
                <div class="info-item">
                    <div class="icon">üéØ</div>
                    <div class="label">Total Decisions</div>
                    <div class="value">100</div>
                </div>
                <div class="info-item">
                    <div class="icon">üìä</div>
                    <div class="label">Stocks to Trade</div>
                    <div class="value">10</div>
                </div>
                <div class="info-item">
                    <div class="icon">‚è±Ô∏è</div>
                    <div class="label">Time Limit</div>
                    <div class="value">2.5 hrs</div>
                </div>
            </div>
            
            <div class="instructions">
                <h4>How It Works:</h4>
                <ul>
                    <li><strong>10 Stocks:</strong> You'll trade 10 different stocks in sequence</li>
                    <li><strong>10 Days Each:</strong> For each stock, you'll make 10 daily decisions</li>
                    <li><strong>Three Actions:</strong> Each day you can BUY (10 shares), SELL (10 shares), or HOLD</li>
                    <li><strong>Fresh Capital:</strong> Start each stock with ‚Çπ100,000</li>
                    <li><strong>Day-by-Day:</strong> Future data is hidden until you make your decision</li>
                    <li><strong>Time Limit:</strong> Complete within 2.5 hours</li>
                </ul>
            </div>
            
            <a href="/experiment/start" class="start-btn">Start Experiment ‚Üí</a>
        </div>
    </div>
</body>
</html>
